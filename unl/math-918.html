<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <title>Math 918, Spring 2026: F-Singularities</title>
    <meta name="author" content="Anna Brosowsky">
    <meta name="description" content="Course webpage for UNL's Math 918 (Topics in Commutative Algebra) for Spring 2026.">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="course.css">
    <script>
    MathJax = {
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        macros: {
          bb: ["{\\mathbb{#1}}",1],
          mf: ["{\\mathfrak{#1}}",1],
          mc: ["{\\mathcal{#1}}",1],
          Spec: "{\\operatorname{Spec}}",
          id: "{\\operatorname{id}}",
          im: "{\\operatorname{im}}",
          ev: "{\\operatorname{ev}}",
          Min: "{\\operatorname{Min}}"
        }
      }
    };
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>

</head>
<body>
    <nav class="menu">
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../research.html">Research</a></li>
            <li><a href="../teaching.html">Teaching</a></li>
            <li><a href="../fun.html">For Fun</a></li>
        </ul>
    </nav>
    <main>
        <h1>Math 918, Spring 2026: F-Singularities</h1>
<h2>Course Documents</h2>
<p><a href="../Files/unl/math-918-sp26-course-announcement.pdf">Course Announcement</a></p>
<p><b><a href="../Files/unl/math-918-sp26-syllabus.pdf">Syllabus</a></b></p>
Here are the two general references for the course.
<ul>
<li> Linquan Ma &amp; Thomas Polstra's <a href="https://www.math.purdue.edu/~ma326/F-singularitiesBook.pdf">F-Singularities: A Commutative Algebra Approach</a>; called [MP] in the daily update.</li>
<li>Alessio Caminata &amp; Alessandro de Stefani's <a href="https://a-destefani.github.io/ads/files/Notes.pdf">Notes for course on F-singularities</a>; called [CdS] in the daily update.</li>
<li>An additional resource is Karl Schwede &amp; Karen Smith's <a href="https://github.com/kschwede/FrobeniusSingularitiesBook">Singularities defined by the Frobenius map</a>; however note that this book requires more knowledge of algebraic geometry than is covered by the prereqs of this course, so I will not be explicitly suggesting it as complementary reading (even though their order of topics matches ours most closely!).</li>
</ul>

<p>Office Hours: <b>Mon 1:30-2:30</b> and <b>Thurs 12:30-1:30</b>. Or stop by my office when my door is open.</p>

<h4>Homeworks</h4>
<ul>
<li> Homework 1: [<a href="../Files/unl/math-918_hw1.pdf">PDF</a>] and [<a href="../Files/unl/math-918_hw1.tex">TeX</a>] + [<a href="../Files/unl/math-hw.sty">math-hw.sty</a>] (style file needed to compile!)
    <ul><li>Due on Friday Feb 6th at midnight. Submit on Gradescope.</li></ul></li>
<li> Homework 2: [<a href="../Files/unl/math-918_hw2.pdf">PDF</a>] and [<a href="../Files/unl/math-918_hw2.tex">TeX</a>] + [<a href="../Files/unl/math-hw.sty">math-hw.sty</a>] (style file needed to compile!)
    <ul><li>Due on Friday Feb 20th at midnight. Submit on Gradescope.</li></ul></li>
</ul>

<h4>In-Class Handouts</h4>
<ul>
    <li>02/03 Worksheet: [<a href="../Files/unl/math-918_wksht-02-03.pdf">Fedder's Criterion</a>]</li>
    <li>02/05 Cheatsheet: [<a href="../Files/M2-cheatsheet.pdf">Macaulay2 Cheatsheet</a>]</li>
</ul>
<h3>HCC Info</h3>
<p>You have access to the Holland Computing Center (HCC) for this class! To use these resources, you will need an account associated with HCC that is separate from your University of Nebraska account and credentials:</p>
<ul>
    <li>If you need an HCC account: <a href="https://hcc.unl.edu/new-user-request">https://hcc.unl.edu/new-user-request</a> and request the <b>math918</b> group.</li>
    <li>If you already have an HCC account from a prior class or research, you can add the class group to your account or move your account to the <b>math918</b> group: <a href="https://hcc.unl.edu/group-addchange-request">https://hcc.unl.edu/group-addchange-request</a>. 
<br><em>Note:</em> Not actually required to add/change group! ANY access to HCC is good enough for us. But you're still welcome to join the class group if you e.g. want to keep class access separate from research access for some reason.</li>
</ul>

<p>**You will need to activate your DUO two factor for your HCC account in order to use the resources. Without this you will not have access! This is different from the TrueYou DUO you use to log into other UNL services.**</p>

<p>Here is some other important info:</p>
<ul>
    <li>For more useful links and notes for students taking a class using HCC resources, please see <a href="https://hcc.unl.edu/docs/faq/class_students">https://hcc.unl.edu/docs/faq/class_students</a>.</li>
    <li>While using HCC resources for this class, be aware of HCC's class account guidelines and center's policies: <a href="https://hcc.unl.edu/hcc-policies">https://hcc.unl.edu/hcc-policies</a>.</li>
    <li>Pay special attention to the guidelines for class accounts since data is removed at the end of the semester: <a href="https://hcc.unl.edu/hcc-policies#class-groups">https://hcc.unl.edu/hcc-policies#class-groups</a></li>
</ul>


<h2>Daily Update</h2>

<p>Use this table of contents list to jump to a specific day. Info for future classes is a tentative plan, and will be updated by the day after the class with what actually happened.</p>
<dl>
  <dt><a href="#01-13">Jan 13</a></dt><dd>Basics &amp; Notation: Day 1</dd>
  <dt><a href="#01-15">Jan 15</a></dt><dd>Basics &amp; Notation: Day 2</dd>
  <dt><a href="#01-20">Jan 20</a></dt><dd>Completions and Proof of Kunz's theorem</dd>
  <dt><a href="#01-22">Jan 22</a></dt><dd>Finishing proof of Kunz's theorem + starting F-splitting</dd>
  <dt><a href="#01-27">Jan 27</a></dt><dd>Proof that F-splitting can equivalently be checked for some/any $e$; examples (including $F$-finite regular local rings); the statement of Fedder's criterion; viewing $\hom_S(F_*^eS,S)$ as a rank 1 free module for regular $S$.</dd>
  <dt><a href="#01-29">Jan 29</a></dt><dd>A HW correction; fact about the generating $\Phi$ and ideal containments; more general statement of Fedder's criterion. </dd>
  <dt><a href="#02-03">Feb 03</a></dt><dd>$F$-splitting localizes; the $F$-split locus is open; the completion of Fedder.</dd>
  <dt><a href="#02-05">Feb 05</a></dt><dd>We learned some M2 basics (everything needed to do Fedder's criterion) and also learned how the HCC works.</dd>
  <dt><a href="#02-10">Feb 10</a></dt><dd>Defined (eventual) splitting along elements and SFR. Proved that local + SFR implies domain, and that F-finite regular local rings are SFR.</dd>
  <dt><a href="#upcoming">Upcoming</a></dt><dd>More Fedder examples; proof that SFR localizes; other nice properties.</dd>
</dl>

<h3 id="01-13">Jan 13</h3>
    <p><b>Big Assumptions</b> (for all semester!): p = a prime number; q = a power of p; all rings are unital, commutative, and noetherian. For a very long time (up until reduction to char p), all rings are characteristic p.</p>
    <p>We covered the beginning of Ch 1 of [CdS], up through and including Remark 1.8. (See also very first section of [MP].) <em>Useful fact:</em> In a reduced (char p) ring, when p-th roots exist, they are unique!</p>
    <p>We also concretely looked at $R^{1/p}$ and $F_*R$ in the concrete example where $R=\mathbb F_2[x]$, and saw how these are generated (as $R$-modules) by $\{1,\sqrt x\}$ and $\{1,F_*x\}$, respectively. 
    We saw more generally that when $R= \mathbb F_p[x_1,\ldots, x_n]$, that $F_*R$ is generated by $\{F_*(x_1^{a_1}\cdots x_d^{a_d})\: | \: 0\leq a_i \lt p\}$. 
    We even saw that this generating set is actually a basis! Finally, the following commutative diagram showed us that all three perspectives are really "the same" map. 
    Note that all vertical maps are isomorphisms/equalities, the horizontal maps are all different ways of writing the Frobenius, and the whole bottom row only makes sense when $R$ is reduced.</p>
    <img src="../Files/unl/01-13_comm-digr-small.png">
<h3 id="01-15">Jan 15</h3>
    <p>Defined a separable polynomial and a perfect field (Ref: Section 15.5 of <a href="https://eloisagrifo.github.io/Teaching/algebra.pdf">Eloi&#769;sa's Math 818 notes</a>). 
    In particular, a char $p$ field is perfect if and only if $F$ is a surjection. $K=\mathbb F_p(T)$ is a non-perfect field example. We stated #5 below as a bonus problem (but originally stated it wrong! I meant to say $R^p$ not $R^{1/p}$, my apologies). </p>
    <p>We then worked for a while on questions #1-4, and went over the answers to #1-3:</p>
    <ol>
        <li>Describe the $R$-module structure of $F_*R$ when $R=\mathbb F_p[x,y]/\langle xy\rangle$.
        <button type="button" class="viewsoln">View Solution</button>
        <div class="soln">
            <p> Generators are $\{F_*x^i, F_*y^i\: | \: 0\le i \lt p\}$. I.e., the same as for the polynomial ring, but we remove all the ones corresponding to the cross terms that are already zero in this quotient ring.</p>
            <p> Relations are $yF_*x^i = 0$ and $xF_*y^i=0$.</p>
        </div>
        </li>
        <li>Describe the $R$-module structure of $F_*R$ when $R=\mathbb F_2[x^2,x^3]\subset \mathbb F_2[x]$.
        <button type="button" class="viewsoln">View Solution</button>
        <div class="soln">
            <p> Generators are $\{F_*1, F_*x^2, F_*x^3, F_*x^5\}$. Notice that the monomials in $R$ are every power of $x$ EXCEPT for $x$ itself. So via taking $x^aF_*x^b = F_*x^{2a+b}$ for $b\in \{0,2,3,5\}$, we see that even just $F_*x^{2a+2}$ and $F_*x^{2a+3}$ cover all possible powers $\ge 6$. The only other seemingly missing monomial is $F_*x^4$, but $F_*x^4 = x^2F_*1$.</p>
            <p> Relations are &nbsp; 
            $\begin{aligned} x^3F_*1 &amp;= x^2 F_*x^2 &amp; x^3F_*x^3 &amp;= x^2F_*x^5 \\ x^4F_*1 &amp;= x^3F_*x^2 &amp; x^4F_*x^3 &amp;= x^3F_*x^5\end{aligned}$.</p>
        </div>
        </li>
        <li>Describe the $R$-module structure of $F_*R$ when $R=\mathbb F_3[x,y]/\langle y^2-x^3-x\rangle$.
        <button type="button" class="viewsoln">View Solution</button>
        <div class="soln">
            <p> Generators are $\{F_*1,F_*x,F_*y\}$. Clearly the 9 monomials $\{F_*x^iy^j\: | \: 0\le i,j\lt 3\}$ would suffice as a generating set, so now we'll show that the other 6 of them are actually redundant via taking multiples of our defining equation. 
            As we go down the list, we will only use higher up monomials to get the lower ones.</p>
                <ul>
                  <li> $F_*y^2 = xF_*1 + F_*x$ (via original equation)</li>
                  <li> $F_*xy  = yF_*1 - xF_*y$ (via $\cdot y$)</li>
                  <li> $F_*xy^2 = yF_*y - xF_*y^2$ (via $\cdot y^2$)</li>
                  <li> $F_*x^2 = F_*xy^2 - xF_*x$ (via $\cdot x$)</li>
                  <li> $F_*x^2y^2 = xF_*x^2 + xF_*1$ (via $\cdot x^2$)</li>
                  <li> $F_*x^2y = yF_*x - xF_*xy$ (via $\cdot xy$)</li>
                </ul>
            <p>There are no relations! </p>
        </div>
        </li>
        <li>Describe the $R$-module structure of $F_*R$ when $R=\mathbb F_p(T)[x]$.
        <button type="button" class="viewsoln">View Solution</button>
        <div class="soln">
            <p>Generators are $\{F_*(T^jx^i)\: | \: 0\le i,j\lt p\}$. No relations!</p>
            <p>Notice that $TF_*x^i = F_*(T^px^i)$. So if we had only used the generators from the perfect field case, we would be missing being able to write an element like $F_*T$. Or said another way, previously in the perfect case we knew that if we wanted to write $F_*(ax)$, we could always pull out the $a$ via taking a $p$-th root, so that $F_*(ax) = a^{1/p}F_*x$. But if the Frobenius isn't surjective, we can't do that anymore!</p>
        </div>
        </li>
        <li>Give an example of a ring $R$ where $R^{p}$ is NOT isomorphic to $F_*R$. In other words, an example where the inclusion $R^p\hookrightarrow R$ is NOT the same map as the Frobenius. [Corrected typo from earlier statement: I wanted $R^p$ not $R^{1/p}$!]</li>
    </ol>

  <p>We then noticed a pattern: drawing the corresponding varieties for the two ``free'' examples gave us affine space (the polynomial ring) and a smooth elliptic curve (#3). Drawing the two ``non-free'' examples gave us two lines crossing (#1) and a cuspidal cubic (#2).</p>
  <div class="defn"><p><b>Definition:</b> The ring $(R,\mathfrak m, k)$ is a  <em>regular local ring</em> if $\dim R = \dim_k \mathfrak m /\mathfrak m^2$. In other words, if the Krull dimension = the embedding dimension.</p><p>A ring $R$ is a <em>regular ring</em> if $R_{\mathfrak m}$ is a regular local ring for every maximal ideal $\mathfrak m$.</p></div>
  <p>You will eventually learn a lot more about regular rings in Math 906.</p>
  <div class="thm"><p><b>Kunz's Theorem:</b> $R$ is regular if and only if the Frobenius is flat.</p></div>
  <div class="defn"><p><b>Definition:</b> $R$ is <em>$F$-finite</em> if $F_*R$ is a finitely generated $R$-module.</p></div>
  <p>For a local ring and a finitely generated module $M$, you already know that $M$ is flat if and only if it is free. This and our new definition give us an immediate corollary to Kunz.</p>
  <div class="thm"><p><b>Corollary:</b> Let $(R,\mathfrak m)$ be an $F$-finite local ring. Then $R$ is regular if and only if $F_*R$ is free.</p></div>


<h3 id="01-20">Jan 20</h3>

<p>Some facts (that became exercises):</p>
<ol>
<li>
Prove that $F$ induces an isomorphism on Spec.
        <button type="button" class="viewsoln">View Solution</button>
        <div class="soln"><p>The induced map on Spec takes a prime ideal $Q$ to $F^{-1}(Q)$. If $r\in Q$, then $r^p=F(r)\in Q$ and thus $r\in F^{-1}(Q)$. Conversely, if $r\in F^{-1}(Q)$ this means $r^p\in Q$, but $Q$ is prime so $r\in Q$.</p></div>
</li>
<li>Prove that $F_*^e$ is an exact functor. (In particular, we first saw what it does to maps and to modules: just throws an $F_*^e$ decoration in front!)
        <button type="button" class="viewsoln">View Solution</button>
        <div class="soln"><p>See proof of Prop 1.10(1) in [CdS].</p></div>
</li>
<li>If $W\subset R$ is a multiplicative set, then $W^{-1}(F_*^eR)\to F_*^e(W^{-1}R)$ via $\frac{F_*^e r}{w}\mapsto F_*^e(\frac{r}{w^{p^e}})$ is a $W^{-1}R$-module isomorphism.
        <button type="button" class="viewsoln">View Solution</button>
        <div class="soln"><p>See proof of Prop 1.10(2) in [CdS].</p></div>
</li>
</ol>


<div class="defn">
<p><b>Definition:</b> A sequence $(r_n)_{n\in \mathbb N}$in $R^{\mathbb N}$ is <em>Cauchy in the $I$-adic topology</em> if for all $t\in \mathbb N$ there exists a $d\in \mathbb N$ such that for $n,m\geq d$, we have $r_n-r_m\in I^t$.

Let $C_I(R)$ be the set of Cauchy sequences.

Let $C^0_I(R)$ be the sequences convernging to zero, i.e., s.t. for all $n$ there exists $m$ s.t. for all $i\geq m$, $r_i\in I^n$. 
</p></div>

<div class="thm">
<p><b>Facts/Definition:</b> $C_I(R)$ is a ring and $C^0_I(R)$ is an ideal; the completion is $\widehat R^I = C_I/C_I^0$. We're going to only use this for local rings and the $I=\mathfrak m$ case, written just plain $\widehat R$, which satisfies:</p>
<ul>
<li>$\widehat R$ is a local commutative unital noetherian ring</li>

<li>Completion at $\mathfrak m$ is faithfully flat</li>

<li>$R$ is regular if and only if $\widehat R$ is regular.</li>

<li>(Cohen Structure Theorem, equicharacteristic case) Suppose $(R,\mathfrak m,k)$ is a complete local ring containing a field. Then $R\cong k[[ x_1,\ldots, x_n]]/I$. Further, $R$ is regular if and only if $R\cong k[[x_1,\ldots, x_d]]$.</li>
</ul>
</div>

<p><em>Proof of Kunz's theorem (regular implies flat): </em></p>
<p>$R$ is regular iff $R_Q$ is regular for all $Q$; and a map $\phi$ is flat iff $\phi_Q$ is flat for all $Q$. Further, $F_*^e$ commutes with localization. Thus we reduce to the local case. Now consider</p>
<img src="../Files/unl/01-20_kunz-comm-digr-small.png">
<p>Recall fact: In such a diagram (where both vertical maps are faithfully flat), if the bottom map is flat then so is the top one. So sufficient to show for the complete case, and likewise sufficient to do for a power series ring over an algebraically closed field, but we (basically) already did that!&nbsp; &#9632;
</p>
<p>We started the proof of the other direction (in the style of [CdS]) but didn't finish; however we did get through the following:</p>
<div class="defn">
<p><b>Definition:</b> 
Let $(R,\mathfrak m)$ local. 
Then $x_1,\ldots, x_n$ is <em>Lech independent</em> if having $a_1x_1+\cdots + a_nx_n=0$ for $a_i\in R$ in fact implies that $a_i \in \langle x_1,\ldots, x_n\rangle$ for all $i$.</p>

<p>Equivalently: letting $\mathfrak q = \langle \underline x\rangle$, they are Lech independent iff they minimally generate $\mathfrak q$ and $\mathfrak q/\mathfrak q^2$ is a free $R/\mathfrak q$-module.
</p>
</div>

<div class="thm">
<p><b>Lech's Lemma:</b> 
Let $(R,\mathfrak m)$ be a local ring and $x_1,\ldots, x_n$ be Lech independent elements which generate an $\mathfrak m$-primary ideal. 
If $x_1=y_1z_1$ then \[\ell_R(R/\langle x_1,\ldots, x_n\rangle)=\ell_R(R/\langle y_1,\ldots, x_n\rangle) + \ell_R(R/\langle z_1,\ldots, x_n\rangle)\]
</p></div>
<p>Proof in Lemma 2.6 of [CdS]</p>


<h3 id="01-22">Jan 22</h3>
<div class="thm">
<p><b>Proposition:</b> If $\underline x\in R$ is Lech independent and $\varphi:R\to S$ is a flat map, then $\varphi(x_1),\ldots, \varphi(x_n)$ is Lech independent in $S$.</p>
</div>
<p><b>Proof:</b> Let $I=\underline x$. Then by Lech independence, $I/I^2 \cong (R/I)^n$ as $(R/I)$ and as $R$-modules. But then flatness gives
\[
(IS)/(IS)^2 \cong (S/IS)^n
\]
and by rank reasons clearly $\varphi(\underline x)$ is still a minimal generating set.&nbsp; &#9632;
</p>

<div class="thm">
<p><b>Proposition:</b> If $\underline x$ is Lech independent and $x_1=y_1z_1$ then $y_1,\ldots, x_2,\ldots, x_n$ is L.i.
</p></div>
<p><b>Proof:</b> From last time, we saw that $\underline x : y_1 = \langle z_1,x_2,\ldots, x_n\rangle$. 
So suppose we have coefficients $a_1z_1 + \sum_{i=2}^n a_ix_i=0$. 
Multiply by $y_1$ to get $a_1(y_1z_1)+\sum_i (a_iy_1)x_i=0$. 
By Lech independence of $\underline x$, this means $a_1 \in \underline x \subset \langle z_1,x_2,\ldots, x_n\rangle$. 
Further, means $a_i \in \underline x:y_1 = \langle z_1,x_2,\ldots, x_n\rangle$ as desired.&nbsp; &#9632;</p>




<p><b>Proof of Kunz's theorem (flat => regular):</b> 
$R$ is regular if and only if $\widehat R$ is regular, and by the same diagram before, if $F_*\widehat R$ is a flat $\widehat R$ module then  $F_*R$ is a flat $R$-module. (In fact, this is iff because $\widehat R\to \widehat{F_*R}$ is canonically $\widehat R\to F_* \widehat R$.) So WLOG $R$ is complete local ring, and $R\cong k[[x_1,\ldots, x_n]]/I$. Let $S=k[[x_1,\ldots, x_n]]$.
</p>
<p>
We can further WLOG assume $n =$ embedding dimension (recall that = $\dim_k\mathfrak m / \mathfrak m^2$ = by NAK the minimal number of generators of $\mathfrak m$), since if not just throw away redundant $x$'s. 
Thus $\underline x$ is Lech independent, and so is $\underline x^{[q]}$, and then also so is $x_1^{a_1},\ldots, x_n^{a_n}$ for combo of powers.. On the one hand, by Lech's length lemma, a base case of $\ell(R/\mathfrak m)=1$,  and induction, we get that $\ell_R(R/\langle x_1^{a_1},\ldots, x_n^{a_n}) = \prod_i a_i$.  But we also can do the same thing to $S$ and see that $\ell_S(S/\langle x_1^{a_1},\ldots, x_n^{a_n}) = \prod_i a_i$.</p>
<p>
Thus $S/\langle \underline x\rangle^{[p^e]}\to S/(I+\langle \underline x\rangle^{[p^e]}\cong R/\mathfrak m^{[p^e]}$ is an isomorphism for all $t$, and so $I\subset \underline x^{[q]}$ and by Krull's intersection, $I=0$. &nbsp; &#9632;</p>

<p>Now... new topic! Moving onto Frobenius splitting. We defined $F$-splitting, saw a proposition about how it relates to other split maps, and saw two examples.</p>

<div class="defn">
<p>
<b>Definition:</b> $R$ is <em>$F$-split</em> if there exists some $R$-module map $\pi\in \operatorname{Hom}_R(F_*R,R)$ such that $\pi\circ F = \operatorname{id}_R$.
</p>
<p>Equivalently: There exists an $R$-module map $\pi:F_*R\to R$ such that $\pi(F_*1)=1$.</p>
</div>
<p>We saw that was the same since being a splitting exactly means that for all $r\in R$ we have $r = \pi\circ F(r) = \pi(F_*r^{p})=\pi(rF_*1)=r\pi(F_*1)$.</p>

<div class="thm">
<p><b>Proposition:</b> If $R$ is $F$-split then $R$ is reduced.</p>
</div>
<p><em>Proof:</em> Let $\pi:F_*R\to R$ be our splitting. If $\pi\circ F=\operatorname{id}_R$, this forces the first map to be injective. And we saw $F$ injective iff $R$ reduced.&nbsp; &#9632;</p>

<div class="zb">
<p>
<b>Example:</b> If $R=k[x]$ or $k[[x]]$ then $R$ is $F$-split. We saw that in fact these examples are both free, with $R$-basis of $\{F_*x^i\: | \: 0\le i \lt p\}$. 
By freeness, we can define a map by doing whatever we want on the generators, such as the <em>standard monomial splitting</em>, which sends
\[F_*1\mapsto 1, \qquad F_*x^i\mapsto 0\ \  \forall 0\lt i\lt p.\]</p>
</div>
<div class="thm">
<p><b>Proposition:</b> Suppose $\varphi:R\to S$ is split (as an $R$-module map). If $S$ is $F$-split then so is $R$.</p>
</div>
<p><em>Proof:</em> 
Suppose that $\varphi$ is split via $\gamma:S\to R$, and that $F_S$ is split via $\pi:F_*S\to S$. 
Then $\gamma\circ\pi\circ (F_*\varphi)$ is our desired splitting of $F_R$. See this via
\[\gamma\circ\pi\circ (F_*\varphi)(F_*1) = \gamma\circ \pi(F_*\varphi(1)) = \gamma(\pi(F_*1))=\gamma(1)=1.\quad &#9632;\]</p>
<div class="zb">
<p><b>Example:</b>
Let $G$ be a finite group such that $p\not|\,|G|$. Let $R$ be a char $p$ ring with a $G$ action, and let
\[R^G = \{r\in R \: | \: g\cdot r = r \ \forall g\in G\}\]
be the invariant subring. The inclusion $R^G\to R$ is always split via the <em>Reynold's operator</em>:
\[R\to R^g\qquad r\mapsto \frac{1}{|G|}\sum_{g\in G}g\cdot r\] 
Thus whenever $R$ is $F$-split, the invariant ring $R^G$ is also $F$-split.</p>
<p>As a more specific example, take $G=S_3$ and $R=\mathbb F_p[x_1,x_2,x_3]$. Have $G$ act on $R$ via $\sigma\cdot f(x_1,x_2,x_3) = f(x_{\sigma(1)},x_{\sigma(2)},x_{\sigma(3)})$. Examples of polynomials in $R^G$ are $x_1x_2x_3$ and $x_1+x_2+x_3$, but NOT plain old $x_1$ or plain old $x_1x_2$. Using the previous polynomial example and the above invariant example, we see that if $p\ge 5$ then $R^{S_3}$ is $F$-split.</p>
</div>

<p>Today's class prompted some good requests for examples, which I will give you on Tuesday:</p>
<ul>
<li>What's an example of a reduced ring that is NOT $F$-split?</li>
<li>What's an example of an invariant ring that is $F$-split even though $p||G|$?</li>
</ul>
<p>Finally, an in-class exercise was to prove the following, which we will go over on Tuesday:</p>
<div class="thm">
<p><b>Proposition:</b> The following are equivalent for a char $p$ ring $R$.
  <ol>
    <li>$R$ is $F$-split.</li>
    <li>There exists some $e\gt 0$ such that $F^e:R\to F_*^eR$ splits.</li>
    <li>For all $e\gt 0$ the map $F^e:R\to F_*^eR$ splits.</li>
  </ol>
</p></div>

<h3 id="01-27">Jan 27</h3>
<p><b>Proof of proposition from last week (F-split iff for some e iff for all e):</b>
1 implies 3: If $\pi:F_*R\to R$ is our splitting, then notice that $\pi\circ F_*\pi \circ \cdots \circ F_*^{e-1}\pi:F_*^eR\to R$ is a splitting!
Notation $\pi^{\star e} =$ such a composition, and in fact $\psi\star \phi := \psi\circ F_*^e\phi$. </p>

<p>3 implies 2: clear</p>

<p>2 implies 1: let $\pi:F_*^eR\to R$ be our splitting. Then
\[ R \stackrel{F}{\to} F_*R \stackrel{F_*F^{e-1}}{\to} F_*^eR \stackrel{\pi}{\to}  R \]
so take $\pi \circ F_*F^{e-1}$ as our splitting.  &nbsp; &#9632; </p>

<p><b>(Non)Example:</b> The ring $\mathbb F_2[x^2,x^3]$ is reduced, but is NOT $F$-split. (Proved in HW 1 #4). </p>

<p><b>Example:</b>  Here are some invariant rings that ARE $F$-split even though $p$ divides the order of the group (so that the Reynold's operator proof won't work):</p>
<ul>
    <li>If $G$ acts via the trivial action, then for ANY ring $R$ we have $R^G=R$. So regardless of the group order, if $R$ is $F$-split then clearly so is $R^G$.</li>
    <li>If $G=S_2$ and $R=\mathbb F_2[x,y]$ and we do the same symmetric group action of permutating the variables from last time. Then $R^G = \mathbb F_2[x+y,xy]\cong \mathbb F_2[w,z]$ which is regular and thus $F$-split.</li>
</ul>

<p>The following theorem was an in-class exercise.</p>
<div class="thm"><p><b>Theorem:</b> Any $F$-finite regular local ring is $F$-split. Any complete regular local ring is $F$-split.</p></div>
        <button type="button" class="viewsoln">View Complete Regular Local Proof</button>
        <div class="soln">
            <p>By the Cohen structure theorem, if $R$ is a complete regular local ring then $R\cong k[[x_1,\ldots, x_d]]$ where $k$ is the residue field. From seeing this example before we know that $F_*R$ is free (though possibly infinitely generated if $k$ is a bad field!), that $F_*1$ is part of a basis, and so the standard monomial splitting works. Recall the standard monomial splitting sends $F_*1\mapsto 1$ and $F_*(\lambda_i x^{\alpha})\mapsto 0$ for all the other generators.  &nbsp; &#9632; </p>
        </div>
        <button type="button" class="viewsoln">View $F$-Finite Regular Local Proof</button>
        <div class="soln">
            <p>By Kunz, regular means $F_*R$ is flat. Since we're further $F$-finite and local, $F_*R$ is free. So as long as we can prove that $F_*1$ is part of a minimal generating set (i.e., part of a basis) we can do the same thing as above and construct a map that sends $F_*1$ to $1$ and the other generators to wherever we want. To check this use NAK! $F_*1$ is part of a minimal generating set if and only if $F_*1$ is non-zero in $F_*R/\mathfrak mF_*R$. By definition we  can simplify $\mathfrak F_R= F_*\mathfrak m^{[p]}$, and clearly $F_1 \notin F_*\mathfrak m^{[p]}$. Thus we can extend to a minimal generating set (=free basis).  &nbsp; &#9632; </p>
        </div>

<p><b>WARNING:</b> It is NOT true that every regular local ring is $F$-split; we really do need some adjectives! We will see an example later in the semester. </p>

<div id="fedder-criterion" class="thm"><p><b>Fedder's Criterion:</b> Let $S$ be an $F$-finite regular local ring, and let $R=S/I$. Then $R$ is $F$-split if and only if $I^{[p]}:I\not\subseteq \mathfrak m^{[p]}$ </p></div>

<p>It's stated there for motivation but it will take us a while to prove it. First we want to have a good understanding of what $\hom_S(F_*^eS,S)$ looks like, and how it relates to $\hom_R(F_*^eR,R)$. This will then help us figure out how a potential splitting of the Frobenius on $R$ might relate to one on $S$.</p>

<p><b>Remark:</b> If $T$ is an $R$-algebra, then $\hom_R(T,R)$ has the structure 
of a $T$-module via premultiplication: $(t\cdot \varphi)(s) = \varphi(ts) $.
So, $\hom_R(F_*^eR,R)$ has the structure of an $F_*^eR$-module via premultiplication: $(F_*^er \cdot \varphi)(F_*^es) = \varphi(F_*^e(rs))$.</p>


<div class="thm"><p><b>Proposition:</b> 
Let $k$ be an $F$-finite field, and let $S=$ either $k[x_1,\ldots, x_d]$, or the localization thereof at $\mathfrak m$, or $k[[x_1,\ldots, x_d]]$. 
Then $\hom_S(F_*^eS,S)$ is a free rank one $F_*^eS$-module. 
Specifically, if $\{F_*^e\lambda_i\}$ is a $k$-basis of $F_*^ek$ (where wlog $\lambda_1=1$), then  $\Phi:F_*^eS\to S$ is our generator where $\Phi$ is defined on the monomial basis to be 
\[
\Phi(F_*^e(\lambda_ix^{\alpha})) = \begin{cases} 1 & i=1,\  \textrm{and }\alpha_j = (p^e-1)\ \forall j\\
0 & \textrm{else} \end{cases} \]
</p></div>
<p><b>Proof (when $k$ is perfect):</b>
$k$ is perfect means we don't have to worry about the $\lambda_i$ (a similar proof works with them there it is just more annoying to type out but not any more interesting). Let $\pi_\alpha$ be the dual (projection) to $x^{\alpha}$, so that
\[
\pi_\alpha(F_*^e(x^{\beta})) = \begin{cases} 1 & \alpha = \beta\\
0 & \textrm{else} \end{cases}. \]
</p>
<ul>
  <li>Goal 1: Show that each $\pi_\alpha$ can be written as $F_*^es\cdot \Phi$ for some $s\in S$. (Hint: First notice that $\Phi$ itself is a $\pi_\alpha$, and then see what $F_*^ex\cdot \Phi$ looks like in terms of the $\pi_\alpha$'s, and see if you can figure out a pattern.)
        <button type="button" class="viewsoln">View Goal 1 Proof</button>
        <div class="soln">
            <p>Let ùüô denote the all 1's vector. So $\Phi = \pi_{(p^e-1)ùüô}$, and more generally we HAVE a map that sends exactly one monomial to 1 (and the rest to 0), and we WANT maps that send exactly one monomial to 1 (and the rest to 0). So we should try acting by monomials. Specifically,
        \[F_*^e(x^{(p^e-1)ùüô-\alpha})\cdot \Phi (F_*^ex^{\beta}) 
            = \Phi(F_*^e x^{(p^e -1)ùüô-\alpha+\beta}) = \begin{cases} 1 & (p^e-1)ùüô  - \alpha+\beta = (p^e-1) ùüô \\ 0 & \textrm{else}\end{cases}.\] I.e., it equals one exactly when $\beta = \alpha$. So $F_*^e(x^{p^eùüô -1 -\alpha})\cdot \Phi = \pi_\alpha$.  &nbsp; &#9632; </p>
        <p><b>Observation:</b> This shows why we needed $\Phi$ to send the LARGEST generator to zero. Otherwise the $x^{  (p^e-1)ùüô -\alpha}$ we are acting by would have had the $(p^e-1)ùüô$ replaced by something smaller, and so the whole exponent would have been negative sometimes (bad because we're in a polynomial/power series ring). </p>
        </div></li>
  <li>Goal 2:  Show that the $\pi_\alpha$ generate $\hom_S(F_*^eS,S)$ as an $F_*^eS$ algebra.
        <button type="button" class="viewsoln">View Goal 2 Proof</button>
        <div class="soln">
            <p>Consider a map $\psi:F_*^eS\to S$. If we build a map that agrees with $\psi$ on the generators $x^\alpha$ then we're done. So define our candidate map
            \[\varphi= \sum_\alpha F_*^e(\psi(x^\alpha))^{p^e} \cdot \pi_\alpha \] 
            which ensures
            \[\varphi(F_*^e(x^\beta)) 
            = \sum_\alpha( F_*^e(\psi(x^\alpha)^{p^e}) \cdot \pi_\alpha)(F_*^ex^\beta) 
            = \sum_\alpha \pi_\alpha(F_*^e(\psi(x^\alpha)^{p^e}x^\beta)) = \sum_\alpha \psi(x^\alpha)\pi_\alpha(F_*^ex^\beta) = \psi(x^\alpha)\pi_\alpha(F_*^ex^\alpha) = \psi(x^\alpha)\]
            as desired. Notice the magic that happened here---our action only allows us to act via pre-multiplication. However, by acting by a $p^e$-th power of an element, we get the same answer as if we acted by post-multiplication!
            In other words, the usual fact that the $\pi_\alpha$ generate as an $S$-basis (by typical dual basis fact) is also why we're getting that these generate over $F_*^eS$.  &nbsp; &#9632; </p>
        </div></li>
</ul>
<p>Now clearly combining Goal 1 and Goal 2 we see that $\Phi$ generates. For freeness, the only possible relation is of the form $F_*^es \cdot \Phi=0$. But this can never happen---$\Phi$ is non-zero on monomials of arbitrarily large degree!   &nbsp; &#9632; </p>


<h3 id="01-29">Jan 29</h3>

<p><b>Remark:</b>
In fact, $\hom_S(F_*^eS,S)$ is a free rank one $F_*^eS$ for any Gorenstein local ring $S$ (in particular, for any regular local ring). 
See Remark 5.9 of [CdS] for a proof. 
We'll use the regular case of this statement to be able to the following results for any regular local ring, not just polynomials/power series.</p>

<div id="fedder-containment-lemma" class="thm"><p><b>Proposition:</b>
Let $S$ be an $F$-finite regular local ring and let $\Phi$ be the generator of $\hom_S(F_*^eS,S)$. Let $I$ and $J$ be ideals of $S$. Then
\[
\Phi(F_*^eJ)\subset I \iff J\subset I^{[p^e]}
\]
</p></div>
<p><b>Proof:</b>
    If $J\subset I^{[p^e]}$, then in fact for ANY map $\psi\in \hom_S(F_*^eS,S)$ we have
    \[
    \psi(F_*^eJ)\subset \psi(F_*^eI^{[p^e]}) \subset I\psi(F_*^eS)\subset I.
    \]
    For converse, first make several observations:
    By Kunz $F_*^eS$ is free over $S$, with basis $\{F_*^eg_i\}_{i=1}^t$. 
    Let $\{\pi_i\}_{i=1}^t\subset \hom_S(F_*^eS,S)$ be the dual basis (recall: this means $\pi_i(F_*^eg_j)=1$ if $i=j$, otherwise $0$). 
    Further, because $\Phi$ generates, there exist $s_i\in S$ s.t. $\pi_i = F_*^es_i \cdot \Phi$. 
    And 
    \[\id_{F_*^eS} = \sum_i \gamma_i \circ \pi_i,\]
     where here $\gamma_i$ is the $S$-module map $S\to F_*^eS$ which sends $1\mapsto F_*^eg_i$. (Notice: this is the same as taking the $e$-th Frobenius map $S\to F_*^eS$, and then composing with multiplication by $F_*^eg_i$).
</p>
<p>
    Now since $\Phi(F_*^eJ)\subseteq I$, we see
    \[\pi_i(F_*^eJ) = (F_*^es_i \cdot \Phi)(F_*^eJ) =\Phi(F_*^e(s_iJ))\subseteq I\]
    and so further,
    \[
    F_*^eJ = \id_{F_*^eS}(F_*^eJ) 
    = \sum_i \gamma_i \circ \pi_i(F_*^eJ)
    \subseteq \sum_i \gamma_i(I) = \sum_i I\gamma_i(S)\subseteq I 
    \]
    as desired.  &nbsp; &#9632; 
</p>

<div id="fedder-hom-structure" class="thm"><p><b>Theorem:</b> 
Let $S$ be an $F$-finite ring, $I$ an ideal, and $R=S/I$. 
Then there is a natural $F_*^eS$-module map
\[\Psi:(F_*^e(I^{[p^e]}:I))\cdot \hom_S(F_*^eS,S)\to \hom_R(F_*^eR,R).\]
If $S$ is regular, then this map is a surjection and the kernel is $F_*^e(I^{[p^e]})\cdot \hom_S(F_*^eS,S)$.</p></div>
  <p><b>Proof:</b>
    <em>The natural map:</em>
    Let $t\in I^{[p^e]}:I$ and $\varphi\in \hom_S(F_*^eS,S)$. Given $r+I\in S/I=R$, we ideally want the resulting map on $\hom_R(F_*^eR,R)$ to have $F_*^e(r+I)\mapsto (F_*^et\cdot \varphi)(F_*^er) + I$. 
    This will work! To check it is in $\hom_R(F_*^eR,R)$ we only need to check well-definedness, i.e., that things in $F_*^eI$ are sent to things in $I$. Sosuppose we have some $j\in I$. 
    Then
    \[(F_*^et\cdot \varphi)(F_*^ej) = \varphi(F_*^e(jt))\in \varphi(F_*^e(I^{[p^e]}) = I\varphi(F_*^eS) \subset I.\]
    And by design, the overall map $\Psi$ is an $F_*^eS$-module map. </p>
    <p><em>Surjectivity in the regular case:</em>
    Since $S$ is regular we have $F_*^eS$ flat (by Kunz). Since $S$ also $F$-finite, we further have $F_*^eS$ a projective $S$-module. 
    Thus ANY map  $\theta\in \hom_R(F_*^eR,R)$ can be lifted to  $\Theta\in\hom_S(F_*^eS,S)$ (using that the projection map $\rho:S\to R$ is surjective). 
    By our knowledge of $\hom_S(F_*^eS,S)$, we can write $\Theta = F_*^es \cdot \Phi$. To finish surjectivity, it will suffice to check that $s\in I^{[p^e]}:I$. 
    But by virtue of the fact that $\Theta$ descends,
    \[I\supset \Theta(F_*^eI) = \Phi(F_*^e(sI)).\]
    Now by the Proposition above, $sI\subset I^{[p^e]}$, thus $s\in I^{[p^e]}:I$.</p>
    <p><em>Kernel in the regular case:</em>  
    A map $F_*^et\cdot \varphi\in F_*^e(I^{[p^e]}:I)\cdot \hom_S(F_*^eS,S)$ is in the kernel if it descends to the zero map, which happens exactly when $(F_*^et\cdot \varphi)(F_*^eS) = \varphi(F_*^e(tS))\subset I$. Now use the Proposition again, further writing $\varphi = F_*^es\cdot \Phi$, so that $\Phi(F_*^e(stS))\subset I$ and so $stS \subset I^{[p^e]}$. Thus $st\in I^{[p^e]}$, and we've shown that $F_*^et\cdot \varphi = F_*^e(st)\cdot \Phi$ is in $F_*^e(I^{[p^e]})\cdot \hom_S(F_*^eS,S)$ as desired.  
    &nbsp; &#9632; 
  </p>

<p>The following theorem has been restated for clarity. (It was still true as stated in class though!)</p>
<div class="thm"><p><b>Theorem:</b> 
Let $S$ be an $F$-finite ring, $I$ an ideal, and $R=S/I$. Let $\mf q\in \bb V(I)\subset\Spec(S) $ be a prime ideal of $S$ that corresponds to a prime ideal in $R$. Then $R_{\mf q}$ is $F$-split if and only if (for any fixed $e$)
\[(I^{[p^e]}:I)\not\subseteq \mf q^{[p^e]}.\]
</p></div>

<p>Proof is promised for February 3rd!</p>

<p><b>Proof of Fedder's criterion ($I^{[p^e]}:I\not\subseteq \mf m$ version from Jan 27) using the above:</b>
Let $(R,\mf m)$ be our local ring. 
By the Lemma from Feb 3rd, $R$ is $F$-split if and only if $R_{\mf m}$ is $F$-split, i.e., $R$ is F-split at $\mf m$. 
By the above Theorem, this is if and only $(I^{[p]}:I)\not\subseteq \mf m^{[p]}$, as desired.
&nbsp; &#9632; </p>

<!-- <p><b>Proof:</b>
To be filled in.
  &nbsp; &#9632; 
</p>
-->
<!--
<div class="thm">
<p><b>Proposition:</b>
If there exists a map $\pi:F_*^eR\to R$ such that $\pi(F_*^ed)=1$, and $c|d$ in $R$, then there exists a map sending $F_*^ec\mapsto 1$.
</p></div>
-->



<h3 id="02-03">Feb 3rd</h3>

<p>Today had a worksheet: [<a href="../Files/unl/math-918_wksht-02-03.pdf">Fedder's Criterion</a>]</p>

<p>Finishing the proof of the (more general) Fedder's criterion, including some necessary lemmas. Hopefully some examples. Also, <b>set up an HCC account by Thursday</b> if you want to follow along with the demo!</p>
<p>The following results will appear as exercises, in addition to a few more examples (squarefree monomial ideals?)</p>
<div class="thm"><p><b>Lemma 1:</b>
If there exists a map $\pi:F_*^eR\to R$ such that $\pi(F_*^ed)=1$, and $c|d$ in $R$, then there exists a map sending $F_*^ec\mapsto 1$. In particular, if there is ANY surjective map $F_*^eR\to R$ then $R$ is $F$-split.
</p></div>
        <button type="button" class="viewsoln">View Proof</button>
        <div class="soln">
            <p>Write $d=cc'$, and let $\gamma':F_*^eR\to F_*^eR$ be the ``times $F_*^ec'$ map''. Then $\pi\circ \gamma'$ is our desired map, because it has $F_*^ec\mapsto F_*^e(cc')=F_*^ed \mapsto 1$.</p>
            
            <p>The in particular follows since we can always choose $c=1$.&nbsp; &#9632;</p> 
        </div>

<div class="thm"><p><b>Lemma 2:</b>
Let $\ev_d:\hom_R(F_*^eR,R)\to R$ be the "evaluation at $F_*^ed$" map, so that $\ev_d(\varphi) = \varphi(F_*^ed)$. Then there exists a map $\pi\in \hom_R(F_*^eR,R)$ such that $\pi(F_*^ed)=1$ if and only if $\ev_d$ is surjective.
</p></div>
        <button type="button" class="viewsoln">View Proof</button>
        <div class="soln">
            <p>Since the codomain of $\ev_d$ is a free rank one $R$-module, being surjective is equivalent to having $1$ in the image. But this is then equivalent to saying there exists a $\pi$ such that $\ev_d(\pi)=\pi(F_*^e1)=1$.&nbsp; &#9632;</p>
        </div>

<div class="thm"><p><b>Lemma 4:</b>
The following are equivalent for map $\varphi:M\to N$ of $R$-modules:
<ol>
    <li> $\varphi$ is surjective. </li>
    <li> $\varphi^{-1}R$ is surjective for all multiplicative sets $W$.</li>
    <li> $\varphi_{\mf p}$ is surjective for all prime ideals $\mf p$. </li>
    <li> $\varphi_{\mf m}$ is surjective for all maximal ideals $\mf m$.</li>
</ol>
</p></div>
<p><b>Proof:</b>
    A map is surjective iff its cokernel is zero, i.e., iff $N/\im(\varphi))=0$. 
    And checking if a module is zero localizes! 
    More specifically, for (1) equivalent to (2), we know that $\varphi$ is surjective iff $N/\im(\varphi)=0$ iff $W^{-1}(N/\im(\varphi))=0$ for all multiplicative $W$. 
    Since localization exact, $W^{-1}(N/\im(\varphi)) \cong (W^{-1}N)/(W^{-1}\im(\varphi))$. 
    Further, note that $W^{-1}\varphi$ (i.e., the map where $m/w\mapsto \varphi(m)/w$) has image = $W^{-1}\im(\varphi)$. Thus in fact $W^{-1}(N/\im(\varphi))\cong (W^{-1}N)/\im(W^{-1}\varphi)$, and this is zero iff $W^{-1}\varphi$ is surjective.
</p>
<p>
    The arguments for (1) iff (3) and for (1) iff (4) follow similarly.&nbsp; &#9632;
</p>

<div class="thm"><p><b>Proposition 1:</b>
The following are equivalent for any $F$-finite ring $R$:
<ol>
    <li> $R$ is $F$-split. </li>
    <li> $W^{-1}R$ is $F$-split for all multiplicative sets $W$.</li>
    <li> $R_{\mf p}$ is $F$-split for all prime ideals $\mf p$. </li>
    <li> $R_{\mf m}$ is $F$-split for all maximal ideals $\mf m$.</li>
</ol>
</p></div>
        <button type="button" class="viewsoln">View Proof</button>
        <div class="soln">
            <p>Standard comm alg result (<a href="https://eloisagrifo.github.io/Teaching/ca1/CA1notes.pdf">Eloi&#769;sa's 905 notes</a>, Lemma 5.26): If modules are finitely generated, then localization commutes with Hom. In particular, 
            \[\begin{aligned}
              W^{-1}\hom_R(F_*^eR,R) 
                &\cong \hom_{W^{-1}R}(W^{-1}F_*^eR,W^{-1}R) \\
                &\cong \hom_{W^{-1}R}(F_*^e(W^{-1}R),W^{-1}R).
              \end{aligned}
            \]

            By Lemma 2, $R$ is $F$-split iff $\ev_1$ is surjective. By Lemma 4, this is iff $W^{-1}\ev_1$ is surjective for all $W$. By the above standard result, $W^{-1}\ev_1$ can be viewed as a map $\hom_{W^{-1}R}(F_*^e(W^{-1}R),W^{-1}R)\to W^{-1}R$, and in fact by tracing through the isomorphisms this is $\ev_1$ for $W^{-1}R$. 
            Thus by Lemma 2 in reverse, $W^{-1}\ev_1$ is surjective iff $W^{-1}R$ is $F$-split$.</p>
            <p>That completes the proof of (1) iff (2). The proofs of(1) iff (3) and of (1) iff (4) work the same.  &nbsp; &#9632;</p>
        </div>

<div class="thm"><p><b>Corollary 1:</b>
If $R$ is $F$-finite then the locus of $F$-split points is open, and is specifically equal to $\Spec R \setminus \bb V(\im( \ev_1))$.
</p></div>

<p><b>Rmk:</b> The ``locus'' of $F$-split points is the set of points $\mf p$ on which $R$ is $F$-split. 
On Spec, points are prime ideals, and "being $F$-split at prime ideal $\mf p$ means that $R_{\mf p}$ is $F$-split. Finally, open means in the Zariski topology, where all open sets look like
$U=\Spec R\setminus \bb V(J)$ for an ideal $J$.</p>


        <button type="button" class="viewsoln">View Proof</button>
        <div class="soln">
            <p>The localization $R_{\mf p}$ is $F$-split if and only if $\ev_1$ localized at $\mf p$ is surjective, i.e., iff the cokernel $(R/\im(\ev_1))_{\mf p}$ is zero, i.e, iff $(\im(\ev_1))_{\mf p}=R$. 
        That happens iff we inverted an element of the image, i.e., iff $\im(\ev_1)\not\subset \mf p$. 
            By definition, this means $\mf p \notin \bb V(\im (\ev_1))$.  &nbsp; &#9632;</p>
        </div>



<div class="thm"><p><b>Lemma 3:</b>
Let $S$ be regular local $F$-finite, take $t\in I^{[p^e]}:I$ and let $\varphi=F_*^et\cdot \Phi$, where $\Phi$ is as usual the generator of $\hom_S(F_*^eS,S)$. 
Show that $\Psi(\varphi)$ (i.e., $\varphi$ viewed as a map on $S/I$) is surjective if and only if $t\notin \mf m^{[p^e]}$.
</p></div>
        <button type="button" class="viewsoln">View Proof</button>
        <div class="soln">
            <p>If $t\in \mf m^{[p^e]}$, then $\varphi(F_*^es) = \Phi(F_*^e(ts))\in \Phi(F_*^e(\mf m^{[p^e]})) = \mf m \Phi(F_*^eS) = \mf m$. 
            In particular, we never hit $1$ in the image.</p>

            <p>If $t\notin \mf m^{[p^e]}$, then our <a href="#fedder-containment-lemma">containment proposition from Jan 29</a> says $\Phi(F_*^e(tS))\not\subset\mf m$. 
            Thus there is some $s\in S$ such that $\Phi(F_*^e(ts)) = \varphi(F_*^es) \notin \mf m$. 
            Thus the image of $\varphi$ contains a unit, and so $\varphi$ is surjective. &nbsp; &#9632; </p>
        </div>

<p><b>Putting this all together...</b>
    By the <a href="#fedder-hom-structure">theorem on hom structure from Jan 29</a> (and by the fact that $I^{[p^e]}:I$ is an ideal), EVERY map in $\hom_R(F_*^eR,R)$ comes from a map of the form of Lemma 3.
    (See this because for any $t'\in I^{[p^e]}:I$ and $\gamma\in \hom_S(F_*^eS,S)$, we can write $\gamma = F_*^es \cdot \Phi$, and so $F_*^e(t')\cdot \gamma = F_*^e(t's)\cdot \Phi$. 
</p>
<p>By Lemma 1, there exists a $\varphi$ which is surjective when descended to $R$ iff $R$ is $F$-split. 
    By Lemma 3, this happens iff there exists a $t\in I^{[p^e]}:I$ which is $\notin \mf m^{[p^e]}$. 
    In other words, iff $I^{[p^e]}:I\not\subset \mf m^{[p^e]}$. 
    This (FINALLY!) completes the proof of <a href="#fedder-criterion">Fedder's criterion</a>, and in fact in a stronger way where we see we could've done some/any $e$ instead of just $e=1$. &nbsp; &#9632; </p>


<h3 id="02-05">Feb 5th</h3>
<p>Today had a handout: [<a href="../Files/M2-cheatsheet.pdf">Macaulay2 Cheatsheet</a>]</p>
<h4> Macaulay2 (M2) related links</h4>
<ul>
    <li>Web Macaulay2: <a href="https://www.unimelb-macaulay2.cloud.edu.au/">https://www.unimelb-macaulay2.cloud.edu.au/</a> </li>
    <li>The Macauly2 Documentation: <a href="https://macaulay2.com/doc/Macaulay2/share/doc/Macaulay2/Macaulay2Doc/html/">https://macaulay2.com/doc/Macaulay2/share/doc/Macaulay2/Macaulay2Doc/html/</a> </li>
    <li>The M2 Zulip chat (Zulip is a chatroom kinda like slack or discord; this can be a useful place to go with code questions): <a href="https://macaulay2.zulipchat.com/">https://macaulay2.zulipchat.com/</a>
    <li>The M2 GitHub (not needed for most people, but could be useful if you want to install on your personal laptop, or if you want to file a bug report or contribute to code!): <a href="https://github.com/Macaulay2/M2">https://github.com/Macaulay2/M2</a></li>
    <li>Advanced users: You can pass command-line arguments to a .m2 file run as a script using <a href="https://macaulay2.com/doc/Macaulay2/share/doc/Macaulay2/Macaulay2Doc/html/_script__Command__Line.html">scriptCommandLine</a> and <a href="https://www.macaulay2.com/doc/Macaulay2/share/doc/Macaulay2/Macaulay2Doc/html/_value.html">value</a> in your M2 code. </li>
</ul>

<h4>Holland Computing Cluster (HCC) related links</h4>
<ul>
    <li>Swan Open OnDemand (aka, the way to access the HCC through a browser): <a href="https://swan-ood.unl.edu/">https://swan-ood.unl.edu/</a> . 
    You know you set up your account correctly if you are able to login at that link!</li>
    <li>HCC documentation: <a href="https://hcc.unl.edu/docs/">https://hcc.unl.edu/docs/</a></li>
    <li>Guide to basic shell (aka terminal aka console) commands: <a href="https://hcc.unl.edu/docs/connecting/basic_linux_commands">https://hcc.unl.edu/docs/connecting/basic_linux_commands</a></li>
    <li>VERY advanced users: You can pass in command line arguments to an sbatch command via the instructions in <a href="https://stackoverflow.com/questions/27708656/pass-command-line-arguments-via-sbatch">this stackexchange post</a>.</li>
</ul>
<h4>Running M2 on HCC in interactive mode</h4>

<p>To run Macaulay2 on the HCC in interactive mode... First go to <a href="https://swan-ood.unl.edu/">Swan Open OnDemand</a>. Click the dropdown menu for "Clusters" (in the red bar on top), then click the only option which is Swan Shell Access. You're now in a black background, text-only shell! Then run the following three commands one-by-one (commands themselves in the numbered list, comments/context bulleted in underneath each):</p>
<ol>
    <li><div class="code">srun --pty --mem=10gb --qos=short $SHELL</div>
        <ul><li>Before running this line, the "prompt" (place I'm typing) looks something like <div class="code">[username@login1.swan ~]$</div></li>
         <li>This command might take a minute or two to run, with messages saying something about being queued, waiting for resources, and/or having resources allocated. Once it has completed, your new prompt will look something like <div class="code">[username@c0000.swan ~]$</div></li>
         <li>What's going on here? <div class="code">srun</div> = "slurm run", i.e., running a "real time" job using SLURM (what SLURM is doesn't matter, but it does mean a lot of commands start with s...). 
        <div class="code">pty</div> = a specific interface format. 
        <div class="code">mem</div> = an amount of memory. I wouldn't ever go less than 10gb even for a "small" job because even just opening M2 can take some space! 
        <div class="code">qos</div>= "quality of service", aka how the system decides priority (if more people want to run code RIGHT NOW than the system can handle, who gets to go first?). So short means we'll get cut off after 6 hrs, and it might be sooner if tons of people are also requesting short jobs.</li></ul></li>
    <li><div class="code">module load apptainer</div>
      <ul><li>By default installed programs aren't actually accessible to you, you need to "module load" them first. For example, "module load python". Here, "apptainer" is a way to get weirder and more niche programs.</li></ul>
    </li>
    <li><div class="code">apptainer exec docker://unlhcc/macaulay2 M2</div>
      <ul><li>This starts up M2, including "installing" it. The first time you do it, it might take a while (for me it took under 10 minutes, but more than 5). However, it will cache the result in something called a SIF file to make future loads faster! So if you ever see output messages about using cached SIF files, that's usually a good thing :)</ul></li></li>
</ol>
<p>TADA! After this you should now be in M2 interactive mode.</p>

<h4>Uploading Files to HCC</h4>
<p>Easy way:</p>
<ol>
    <li> Go to <a href="https://swan-ood.unl.edu/">Swan Open OnDemand</a>.</li>
    <li> Click the dropdown menu for "Files" (in the red bar on top), then select "Work (math918)". <em>Note:</em> You can also use the "Home Directory" button, however, code run from Work will be faster!</li>
    <li>The page now shows a list of files (or maybe is empty if it's your first time). In the upper right, there are some white and blue buttons. Use the blue Upload button to upload a new file (for example, the demo files from below).Or use "New File" to create a new file from scratch (for example, to copy paste some M2 code from the web version).
</ol>
<p>From this screen you can also create/edit files! The New File button is near the upload button, and is useful for copy-pasting M2 code from the web version. To edit an existing file, scroll down to it in the list and click the meatball menu (3 vertical dots). Both of these (new file or edit) open a file editor. Be sure to save in the upper left when done!</p>
<p>Harder way: Use the scp (secure copy not slurm copy). From your laptops terminal, type<div class="code">scp /path/to/laptop/file username@swan.unl.edu:/work/math918/username</div></p>

<h4>Submitting an asynchronous M2 job to the HCC (aka submitting a batch script)</h4>
<p>The files from class: [<a href="../Files/unl/helloworld.submit">Sample Batch Script</a>] +  [<a href="../Files/unl/demo.m2">demo.m2</a>]. Upload using instructions above!</p> 
<p>To submit this, first need to get into the Swan Shell again. Login to <a href="https://swan-ood.unl.edu/">Swan Open OnDemand</a>. Click the dropdown menu for "Clusters" (in the red bar on top), then click the only option which is Swan Shell Access. You're now in a black background, text-only shell! </p>
<p>Now we need to find where the .submit file is. Here are several useful commands:</p>
<ul>
    <li><div class="code">ls</div> <b>L</b>i<b>S</b>ts what is in the current directory. (Do the files look like what you expected to see?)</li>
    <li><div class="code">pwd</div> <b>P</b>rints <b>W</b>orking <b>D</b>irectory, i.e., tells you the name of the folder you're currently in.</li>
    <li><div class="code">cd /path/to/new/directory</div> <b>C</b>hanges <b>D</b>irectory to wherever you said. Useful special cases on the HCC are <br>
    <span class="code">cd /work/math918/username</span> &nbsp; or &nbsp; <span class="code">cd $WORK</span> &nbsp; to go to your work directory;<br>
    <span class="code">cd /home/math918/username</span> &nbsp; or &nbsp; <span class="code">cd $HOME</span> &nbsp; to go to your home directory;<br>
    <span class="code">cd ..</span> &nbsp; (yes that's two periods no spaces in between them as the path to the file!)  to go up one directory level.
    </li>
</ul>
<p>Use that to get yourself to the directory with the .submit file. (If you followed the instructions under uploading, all you should need to do is <span class="code">cd $WORK</span> &nbsp; but it is recommended to use <span class="code">ls</span> &nbsp; to double check. Finally, run the following command:</p>
<div class="code">sbatch helloworld.submit</div>
<p>where <span class="code">sbatch</span> = "slurm batch", and you can replace helloworld.submit by any batch file.</p>
<p><b>Modifying helloworld.submit:</b> To run an ACTUALY M2 file you care about, just change demo.m2 to the filename you actually want. For more advanced things, here's what's going on inside this file:</p>
<ul>
    <li>Line 1 says "#!/bin/bash". Don't touch this!</li>
    <li>Look at the 2nd &amp; 3rd lines, about runtime and memory. Do you need to request longer? Shorter? More memory? Less memory? If your job uses more time/space than requested the HCC will shut it down :( On the flip side, requesting execessive space/time will take it longer to get scheduled, and since the HCC is a shared resource, is rude. </li>
    <li>Line 4 is how the job name will appear in the queue. Only matters insofar as it is helpful to you, you can name every single job helloworld if you want.</li>
    <li>Lines 5 &amp; 6 say where to put the output &amp; any error messages. If the name starts with a number or letter (just plain helloworld.%J.err) then it will save the file in the same directory you're in when you run <span class="code">sbatch</span>. 
    If the name starts with a slash (like /work/math918/abrosowsky/helloworld.%J.err) then it will put it in that specific folder, even if you're running <span class="code">sbatch</span> from home instead of work.<br>
    If using the version from in class, DEFINITELY change <b>abrosowsky</b> to be <b>your username</b> otherwise you won't be able to access any of the output files. As of 02/09 evening I've changed the format so that my username no longer appears.</li>
    <li>Replace demo.m2 in the last line of the file with the name of the m2 file you care about. Also, delete any echoes you want that's just for debugging demo purposes. 
    There are only two lines that actually matter (not counting the # ones): 
    <div class="code">module load apptainer</div>  
    <div class="code">apptainer exec docker://unlhcc/macaulay2 M2 --script demo.m2</div> </li>
</ul>

<p><b>Possible alternate method:</b> The nice people at the HCC have made us a job template! In Swan Open OnDemand, click the dropdown menu for "Jobs" (in the red bar on top), then click "Job Composer". The macaulay2 template is called Apptainer-macaulay2-job. I still haven't figured out how to actually use the job composer but this might be helpful!</p>

<h4>Troubleshooting</h4>
<p><b>Error Messages?</b> Take a look at the .err file. Does it give anything useful? My rule of thumb: totaly mysterious error usually = ran out of memory</p>

<p><b>Missing files?</b> Did your output end up in home or in work? In a subfolder? Do you have two different HCC groups and put it in your advisor's group instead of the math918 group? Look through different options in the file browser, and double check in the batch file where you told it to save.</p>

<p><b>Other problem?</b> Do you have another problem I should add to this list? Let me know!</p>


<h3 id="02-10">Feb 10</h3>

<p>F-splitting is nice, but can we do better? Our goal: describe a stronger condition on the ring that is still related to the Frobenius, but gets us even nicer properties.</p>

<div class="defn">
<p><b>Definition:</b>
    Let $c\in R$. We say $R$ is <em>$e$-$F$-split along $c$</em> if the map 
    $R\to F_*^eR\to F_*^eR$ via 
    $r\mapsto F_*^er^{p^e}\mapsto F_*^e(r^{p^e}c)$ splits as an $R$-module map.
</p>
<p>
    Equivalently, there exists $\varphi\in \hom_R(F_*^eR,R)$ such that $\varphi(F_*^ec)=1$.
</p>
<p>If there exists such an $e$, say that $R$ is <em>eventually $F$-split along $c$</em>.
</div>

<div class="zb">
<p><b>Example:</b>Let $R=\bb F_p[x]$, $c=x^p$.</p>
<ul>
    <li>$R$ is NOT 1-F-split along $c$. Notice that for any possible $\varphi$, we have $\varphi(F_*x^p) = x\varphi(F_*1) \neq 1$.</li>
    <li>$R$ IS 2-F-split along $c$. In fact taking $\varphi = F_*(x^{p^2-p-1}\cdot \Phi$ works, where $\Phi$ is the generating map which sends $F_*x^{p^2-1}\mapsto 1$. </li>
</ul>
</div>

<div class="thm">
<p><b>Remark 1:</b>
If $a|c$ and $R$ is $e$-$F$-split along $c$ then $R$ is $e$-$F$-split along $a$. 
</p>
</div>
<p><b>Proof:</b> See Tuesday 02/03! Same statement just new vocab. &nbsp; &#9632; </p>

<div class="thm">
<p><b>Corollary:</b>
If $R$ is $e$-F-split along anything, then $R$ is $F$-split.
</p>
</div>
<p><b>Proof:</b> If $R$ is $e$-F-split along $c$, then since $1|c$ we have that $R$ is $e$-F-split along 1. 
    By definition this means there exists a $\varphi$ such that $\varphi(F_*^e1)=1$.&nbsp; &#9632; </p>

<div class="thm">
<p><b>Remark 2:</b>
If $R$ is $e$-$F$-split along $c$ then $R$ is $(e+1)$-$F$-split along $c$. 
</p>
</div>
<p><b>Proof:</b>
    Suppose $\varphi$ is our $e$-F-splitting. By the Corollary, we also know that $R$ is $F$-split, and so let $\pi\in \hom_R(F_*R,R)$ be our Frobenius splitting. 
    Then $\pi\circ F_*\varphi$ is our desired map, since 
    $$\pi\circ F_*\varphi (F_*^{e+1}c) = \pi(F_*\varphi(F_*^ec))
    = \pi(F_*1) = 1&nbsp; &#9632; $$
</p>




<div class="thm">
<p><b>Proposition: </b>
    If $R$ is eventually $F$-split along $c$ then $c$ is a non-zero divisor.
</p>
</div>
<p><b>Proof Method 1:</b> (contrapositive)
    Suppose $cy=0$ for $y\neq 0$. Then our map that we are trying to split sends $y\mapsto F_*^ey^{p^e}\mapsto F_*^e(y^{p^e}c) = F_*^e0$. 
    So the map isn't injective and can't be split. &nbsp; &#9632; 
</p>
<p><b>Proof Method 2:</b> (contradiction)
    If we did have a splitting $\varphi$, we would have 
    $$y = y\varphi(F_*^ec) = \varphi(F_*^e(y^{p^e}c)) = \varphi(F_*^e0) = 0$$
    which is our desired contradiction. &nbsp; &#9632; 
</p>



<div class="defn">
<p><b>Definition:</b>
    Let $R$ be $F$-finite. Then $R$ is <em>strongly $F$-regular</em> (SFR for short on the board) if for all $c$ non-zero divisors, $R$ is eventually $F$-split along $c$.
</p>
<p>
Equivalently (1), 
    $R$ is <em>strongly $F$-regular</em> if for all $c$ non-zero divisors, there exists an $e$ and $\varphi\in\hom_R(F_*^eR,R)$ such that  $\varphi(F_*^ec)=1$.
</p>
<p>
Equivalently (2), 
    $R$ is <em>strongly $F$-regular</em> if for all $c$ not in any minimal prime, $R$ is eventually $F$-split along $c$.
</p>
</div>

<p><b>Proof that equiv (2) and original are the same definition:</b>
    Recall that the set of zerodivisors is the union of all the elements in the associated primes, and that minimal primes are always associated.
    So if $R$ satisfies (2), then it automatically satisfies the original (since if you are a non-zero divisor you are DEFINITELY not in any minimal prime).
</p>
<p>
    Conversely suppose that $R$ satisfies the original. Since 1 is a non-zero divisor, $R$ is eventually $F$-split along $1$, i.e., $R$ is plain old $F$-split. 
    Thus $R$ is reduced, and reduced rings have no non-minimal associated primes. &nbsp; &#9632; 
</p>

<div class="defn">
<p><b>Notation:</b> $R^\circ = R\setminus \bigcup_{\mf p\in \Min(R)}\mf p$ is the notation for the set of elements not in any minimal prime.</p>
</div>

<div class="zb">
<p><b>Examples:</b> (to be proved in a later class)</p>
<ol>
    <li>$F$-finite regular rings are strongly $F$-regular</li>
    <li>$R=\bb F_p[x,y]/\langle xy\rangle$ is $F$-split, but not strongly $F$_regular</li>
</ol>
</div>

<div class="thm">
<p><b>Theorem:</b>
    Let $(R,\mf m)$ be a local $F$-finite strongly $F$-regular ring. Then $R$ is a domain.
</p>
</div>

<p>
We had some good discussions about $F$-finiteness, and I'm going to summarize it here: I'm following the convention of the books we're using, and making $F$-finite part of the definition of SFR. This means that saying it in the previous theorem statement is redundant! I'm going to do that a lot though for emphasis.
</p>
<p>
As Adam pointed out in the chat, the original definition of strong $F$-regularity did not require $F$-finiteness, and indeed there's nothing in the definition that needs it there. In particular while all of our references require this, it's not always required out in the wild. For more about F-singularities in the non-F-finite world, check out <a href="https://www.math.purdue.edu/~murayama/F-SingularitiesNonF-finite.pdf">these notes by Takumi Murayama</a>. 
</p>
<p>
<b>Fact:</b> (we won't prove this) 
    There exists a char $p$ ring $R$ which is regular, but such that $\hom_R(F_*R,R)=0$. 
    In particular, this is a regular ring which is neither SFR nor even F-split.
</p>


<div class="thm">
<p><b>Lemma 1:</b>
    If $\bigcap_{i=1}^n\mf p_i\subset \mf q$ for prime ideals $\mf p_1,\ldots, \mf p_n, \mf q$, then there exists an $i$ such that $\mf p_i\subset \mf q$. 
</p>
</div>
<p><b>Proof:</b>
    We only prove $n=2$, the rest is straightforward induction. If $\mf p_1\subset \mf q$, we're done. Otherwise there exists $a\in \mf p_1\setminus \mf q$. Observe that $\mf p_1\mf p_2\subset \mf p_1\cap \mf p_2$. 
    For all $b\in \mf p_2$, $ab\in \mf q$ which by primeness means $b\in \mf q$ as desired. &nbsp; &#9632;
</p>


<div class="thm"><p><b>Lemma 2:</b> If $(R,\mf m)$ local and $f+g$ is a unit then either $f$ or $g$ is a unit.</p></div>
<p>Proof omitted</p>


<div class="thm"><p><b>Lemma 3:</b>
$R$ is $e$-F-split along $c$ if and only if there exists $\varphi$ such that $\varphi(F_*^ec)=u$ a unit.
</p></div>
<p><b>Proof:</b>
    The forward implication is clear. For the backgwards implication, let $\psi = F_*^e(\frac{1}{u^{p^e}})\cdot \varphi$. Then $\psi(F_*^ec) = \varphi(F_*^e(\frac{c}{u^{p^e}})) = \frac{1}{u}\varphi(F_*^ec) = \frac{1}{u}u = 1$. 
    &nbsp; &#9632;
</p>


<p><b>Proof of SFR + local implies domain:</b> See proof of Lemma 3.2 in [MP]. &nbsp; &#9632;</p>

<div class="thm"><p><b>Theorem:</b>
    Let $(R,\mf m,k)$ be a local $F$-finite regular ring. Then $R$ is strongly $F$-regular.
</p></div>
<p><b>Proof:</b> See proof of Theorem 3.4 in [MP] (ignoring the 1st line about reducing to the local case because we, by assumption, are already in the local case!)    &nbsp; &#9632; </p>


<h3 id="upcoming">Upcoming</h3>
<p>I still you some in-class problem solving and discussion time on the two actual Fedder computations from the Feb 3rd worksheet (squarefree monomial ideals + the cubic). This will happen the next time we have in-person class.</p> 
    <p>Otherwise, we will continue to follow Ch 3 in [MP]. Up next: SFR localizes, proof that regular rings are SFR, and some examples and nice properties.</p>


<p>&nbsp;</p> 
    </main>
<script>
    var coll = document.getElementsByClassName("viewsoln");
    var i;
    for (i = 0; i < coll.length; i++) {
      console.log(i);
      coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.display === "block") {
          content.style.display = "none";
        } else {
          content.style.display = "block";
        }
      });
    }
</script>
</body>
</html>
